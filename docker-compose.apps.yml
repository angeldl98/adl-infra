# APPLICATION STACK
# This file is only started when repos are present and clean.
name: adl-infra-apps

volumes:
  logs-data:
    external: true
    name: adl-infra_logs-data
  pgdata:
    external: true
    name: adl-infra_pgdata
  secrets-data:
    external: true
    name: adl-infra_secrets-data

services:
  adl-web:
    build:
      context: ../adl-web
    container_name: adl-web
    env_file:
      - /opt/adl-suite/data/secrets/runtime.env
    environment:
      NODE_ENV: production
    ports:
      - "3000:3000"
    restart: unless-stopped
    networks:
      - adl-infra_adl-net

networks:
  adl-infra_adl-net:
    external: true

